# Orpheus Desktop Link â€” ĞŸĞ¾Ğ»Ğ½Ñ‹Ğ¹ Ğ¿Ğ»Ğ°Ğ½ Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸

> **Ğ’ĞµÑ€ÑĞ¸Ñ:** 2.0  
> **Ğ”Ğ°Ñ‚Ğ°:** 2026-02-04  
> **Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ:** Ğ£Ñ‚Ğ²ĞµÑ€Ğ¶Ğ´Ñ‘Ğ½ Ğº Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞµ

---

## 1. ĞšĞ¾Ğ½Ñ†ĞµĞ¿Ñ†Ğ¸Ñ

### 1.1. Ğ¦ĞµĞ»ÑŒ
Ğ¡Ğ´ĞµĞ»Ğ°Ñ‚ÑŒ Ğ´ĞµÑĞºÑ‚Ğ¾Ğ¿ **Ñ‚Ğ¾Ğ½ĞºĞ¸Ğ¼ ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ğ¾Ğ¼** Ğ¼Ğ¾Ğ±Ğ¸Ğ»ÑŒĞ½Ğ¾Ğ³Ğ¾ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ:
- Ğ’ÑĞµ ĞºÑ€Ğ¸Ğ¿Ñ‚Ğ¾Ğ³Ñ€Ğ°Ñ„Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ ĞºĞ»ÑÑ‡Ğ¸ Ğ¸ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ñ…Ñ€Ğ°Ğ½ÑÑ‚ÑÑ **Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ½Ğ° Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½Ğµ**
- Ğ”ĞµÑĞºÑ‚Ğ¾Ğ¿ Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡Ğ°ĞµÑ‚ÑÑ Ğº Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½Ñƒ Ğ¸ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ°ĞµÑ‚ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ñ‡ĞµÑ€ĞµĞ· Ğ»Ğ¾ĞºĞ°Ğ»ÑŒĞ½ÑƒÑ ÑĞµÑ‚ÑŒ
- ĞĞ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾: BLE Ğ´Ğ»Ñ ĞºĞ¾Ğ½Ñ‚Ñ€Ğ¾Ğ»Ñ Ğ¿Ñ€Ğ¸ÑÑƒÑ‚ÑÑ‚Ğ²Ğ¸Ñ (proximity check)
- ĞœÑƒĞ»ÑŒÑ‚Ğ¸Ğ°ĞºĞºĞ°ÑƒĞ½Ñ‚Ğ° Ğ½Ğ° Ğ´ĞµÑĞºÑ‚Ğ¾Ğ¿Ğµ **Ğ½ĞµÑ‚** â€” Ğ¾Ğ´Ğ½Ğ° Ğ¿Ñ€Ğ¸Ğ²ÑĞ·ĞºĞ° Ğº Ğ¾Ğ´Ğ½Ğ¾Ğ¼Ñƒ Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½Ñƒ

### 1.2. ĞšĞ»ÑÑ‡ĞµĞ²Ñ‹Ğµ Ğ¿Ñ€Ğ¸Ğ½Ñ†Ğ¸Ğ¿Ñ‹
1. **Security first**: Ğ¿Ñ€Ğ¸Ğ²Ğ°Ñ‚Ğ½Ñ‹Ğ¹ ĞºĞ»ÑÑ‡ Ğ½Ğ¸ĞºĞ¾Ğ³Ğ´Ğ° Ğ½Ğµ Ğ¿Ğ¾ĞºĞ¸Ğ´Ğ°ĞµÑ‚ Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½
2. **Offline first Ğ½Ğ° Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½Ğµ**: Ğ´ĞµÑĞºÑ‚Ğ¾Ğ¿ â€” ÑÑ‚Ğ¾ "Ğ¾ĞºĞ½Ğ¾" Ğ² Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½
3. **Graceful degradation**: Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚ Ğ±ĞµĞ· BLE, BLE â€” ÑƒĞ»ÑƒÑ‡ÑˆĞµĞ½Ğ¸Ğµ
4. **UX > Ñ‚ĞµÑ…Ğ½Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ğ¸**: ĞµÑĞ»Ğ¸ Ñ„Ğ¸Ñ‡Ğ° Ğ»Ğ¾Ğ¼Ğ°ĞµÑ‚ UX â€” Ğ½Ğµ Ğ´ĞµĞ»Ğ°ĞµĞ¼

---

## 2. ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°

### 2.1. ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹ ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      DESKTOP (WinUI 3 / C#)                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  PhoneLinkService â”‚  â”‚  PresenceMonitor  â”‚  â”‚  UIStateManager  â”‚  â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚  â”‚
â”‚  â”‚  â€¢ QR Scanner      â”‚  â”‚  â€¢ Connection     â”‚  â”‚  â€¢ State Machine â”‚  â”‚
â”‚  â”‚  â€¢ LAN Discovery   â”‚  â”‚  â€¢ Grace Timer    â”‚  â”‚  â€¢ Transitions   â”‚  â”‚
â”‚  â”‚  â€¢ Session Mgmt    â”‚  â”‚  â€¢ BLE RSSI (opt) â”‚  â”‚  â€¢ Animations    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚           â”‚                        â”‚                     â”‚           â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                    â”‚                                 â”‚
â”‚                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚                          â”‚    DataProxy      â”‚                       â”‚
â”‚                          â”‚    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚                       â”‚
â”‚                          â”‚    NO KEYS HERE   â”‚                       â”‚
â”‚                          â”‚    Cache only     â”‚                       â”‚
â”‚                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚                                    â”‚                                 â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚         â”‚                          â”‚                          â”‚      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ChatsViewModelâ”‚  â”‚ ContactsViewModel        â”‚  â”‚ ClipboardBridgeâ”‚ â”‚
â”‚  â”‚ (read-only)  â”‚  â”‚ (read-only)              â”‚  â”‚ (bidirectional)â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                         WebSocket over LAN (TLS)
                    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                                    â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      MOBILE (Flutter / Dart)                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                    DesktopLinkService (NEW)                    â”‚ â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ â”‚
â”‚  â”‚  â€¢ QR Code Generator      â€¢ Session Management                â”‚ â”‚
â”‚  â”‚  â€¢ Local WebSocket Server â€¢ Command Router                    â”‚ â”‚
â”‚  â”‚  â€¢ BLE Advertiser (opt)   â€¢ Event Publisher                   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                 â”‚                                   â”‚
â”‚                                 â–¼                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                    Existing Services (unchanged)               â”‚ â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ â”‚
â”‚  â”‚  â€¢ CryptoService (KEYS STAY HERE)  â€¢ WebSocketService         â”‚ â”‚
â”‚  â”‚  â€¢ DatabaseService                  â€¢ ChatSessionController   â”‚ â”‚
â”‚  â”‚  â€¢ ContactModel, ChatModel          â€¢ NotificationService     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2. ĞŸĞ¾Ñ‚Ğ¾ĞºĞ¸ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…

```
ĞŸĞ Ğ˜Ğ’Ğ¯Ğ—ĞšĞ (Ğ¾Ğ´Ğ¸Ğ½ Ñ€Ğ°Ğ·):
  Desktop                              Phone
     â”‚                                    â”‚
     â”‚  â”€â”€â”€â”€ ĞŸĞ¾ĞºĞ°Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚ QR-ĞºĞ¾Ğ´ â”€â”€â”€â”€â”€â”€â”€â”€â–º  â”‚
     â”‚                                    â”‚
     â”‚  â—„â”€â”€â”€ Ğ¡ĞºĞ°Ğ½Ğ¸Ñ€ÑƒĞµÑ‚, Ğ³ĞµĞ½ĞµÑ€Ğ¸Ñ€ÑƒĞµÑ‚ â”€â”€â”€â”€â”€  â”‚
     â”‚       session_token + OTP          â”‚
     â”‚                                    â”‚
     â”‚  â”€â”€â”€â”€ ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ²Ğ²Ğ¾Ğ´Ğ¸Ñ‚ OTP â”€â”€â–º  â”‚
     â”‚                                    â”‚
     â”‚  â—„â”€â”€â”€ ĞŸĞ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ¶Ğ´Ğ°ĞµÑ‚, Ğ¾Ñ‚Ğ´Ğ°Ñ‘Ñ‚ â”€â”€â”€â”€â”€â”€  â”‚
     â”‚       connection_params            â”‚
     â”‚                                    â”‚
     â–¼                                    â–¼
  [PAIRED]                            [PAIRED]


Ğ ĞĞ‘ĞĞ§Ğ˜Ğ™ Ğ Ğ•Ğ–Ğ˜Ğœ (Ğ¿Ğ¾ÑÑ‚Ğ¾ÑĞ½Ğ½Ğ¾):
  Desktop                              Phone
     â”‚                                    â”‚
     â”‚  â”€â”€â”€â”€ WebSocket Connect â”€â”€â”€â”€â”€â”€â”€â”€â–º  â”‚ (LAN, Ğ¿Ğ¾Ñ€Ñ‚ 8765)
     â”‚                                    â”‚
     â”‚  â—„â”€â”€â”€ contacts.sync â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
     â”‚  â—„â”€â”€â”€ chats.list â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
     â”‚                                    â”‚
     â”‚  â”€â”€â”€â”€ message.send â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º  â”‚
     â”‚       (phone encrypts & sends)     â”‚
     â”‚                                    â”‚
     â”‚  â—„â”€â”€â”€ event.new_message â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
     â”‚  â—„â”€â”€â”€ event.typing â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
     â”‚                                    â”‚
     â”‚  â”€â”€â”€â”€ presence.heartbeat â”€â”€â”€â”€â”€â”€â”€â–º  â”‚ (ĞºĞ°Ğ¶Ğ´Ñ‹Ğµ 5 ÑĞµĞº)
     â”‚                                    â”‚
```

---

## 3. ĞŸÑ€Ğ¾Ñ‚Ğ¾ĞºĞ¾Ğ» Desktop Link Protocol (DLP)

### 3.1. Ğ¤Ğ¾Ñ€Ğ¼Ğ°Ñ‚ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹

```json
{
  "v": 1,
  "id": "uuid-v4",
  "type": "command|response|event",
  "cmd": "command_name",
  "data": { },
  "ts": 1706918400000
}
```

### 3.2. ĞšĞ¾Ğ¼Ğ°Ğ½Ğ´Ñ‹: ĞĞ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ

#### `link.request` (Desktop â†’ Phone, Ñ‡ĞµÑ€ĞµĞ· QR)
QR-ĞºĞ¾Ğ´ ÑĞ¾Ğ´ĞµÑ€Ğ¶Ğ¸Ñ‚ JSON:
```json
{
  "cmd": "link.request",
  "data": {
    "desktop_id": "uuid-v4",
    "desktop_name": "Windows PC - Chrome",
    "desktop_pubkey": "base64-encoded-X25519-public-key",
    "lan_ip": "192.168.1.100",
    "lan_port": 8766,
    "nonce": "random-32-bytes-base64",
    "expires": 1706918460000
  }
}
```

#### `link.confirm` (Phone â†’ Desktop)
```json
{
  "cmd": "link.confirm",
  "data": {
    "session_token": "encrypted-session-token",
    "otp": "7429",
    "phone_name": "iPhone 15 Pro",
    "server_port": 8765,
    "server_ip": "192.168.1.50"
  }
}
```

#### `link.verified` (Desktop â†’ Phone, Ğ¿Ğ¾ÑĞ»Ğµ Ğ²Ğ²Ğ¾Ğ´Ğ° OTP)
```json
{
  "cmd": "link.verified",
  "data": {
    "otp": "7429",
    "session_token": "..."
  }
}
```

#### `link.revoke` (Ğ»ÑĞ±Ğ°Ñ ÑÑ‚Ğ¾Ñ€Ğ¾Ğ½Ğ°)
```json
{
  "cmd": "link.revoke",
  "data": {
    "reason": "user_initiated|security|timeout"
  }
}
```

### 3.3. ĞšĞ¾Ğ¼Ğ°Ğ½Ğ´Ñ‹: Presence

#### `presence.heartbeat` (Desktop â†’ Phone, ĞºĞ°Ğ¶Ğ´Ñ‹Ğµ 5 ÑĞµĞº)
```json
{
  "cmd": "presence.heartbeat",
  "data": {
    "ble_rssi": -45,
    "wifi_rssi": -30,
    "desktop_idle_sec": 120
  }
}
```

#### `presence.ack` (Phone â†’ Desktop)
```json
{
  "cmd": "presence.ack",
  "data": {
    "phone_battery": 78,
    "phone_charging": true
  }
}
```

### 3.4. ĞšĞ¾Ğ¼Ğ°Ğ½Ğ´Ñ‹: ĞšĞ¾Ğ½Ñ‚Ğ°ĞºÑ‚Ñ‹

#### `contacts.sync` (Desktop â†’ Phone)
```json
{
  "cmd": "contacts.sync",
  "data": {
    "since": "2024-01-01T00:00:00Z",
    "limit": 100
  }
}
```

#### `contacts.data` (Phone â†’ Desktop)
```json
{
  "cmd": "contacts.data",
  "data": {
    "contacts": [
      {
        "pubkey": "base64...",
        "nickname": "Alice",
        "avatar_hash": "sha256...",
        "last_seen": "2024-01-15T10:30:00Z",
        "is_online": true
      }
    ],
    "has_more": false
  }
}
```

### 3.5. ĞšĞ¾Ğ¼Ğ°Ğ½Ğ´Ñ‹: Ğ§Ğ°Ñ‚Ñ‹ Ğ¸ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ

#### `chats.list` (Desktop â†’ Phone)
```json
{
  "cmd": "chats.list",
  "data": {
    "limit": 50,
    "offset": 0
  }
}
```

#### `chats.data` (Phone â†’ Desktop)
```json
{
  "cmd": "chats.data",
  "data": {
    "chats": [
      {
        "chat_id": "uuid",
        "peer_pubkey": "base64...",
        "peer_nickname": "Bob",
        "last_message_preview": "ĞŸÑ€Ğ¸Ğ²ĞµÑ‚!",
        "last_message_time": "2024-01-15T10:30:00Z",
        "unread_count": 3,
        "is_typing": false
      }
    ]
  }
}
```

#### `chat.messages` (Desktop â†’ Phone)
```json
{
  "cmd": "chat.messages",
  "data": {
    "chat_id": "uuid",
    "before_id": "message-uuid",
    "limit": 50
  }
}
```

#### `chat.messages.data` (Phone â†’ Desktop)
```json
{
  "cmd": "chat.messages.data",
  "data": {
    "chat_id": "uuid",
    "messages": [
      {
        "id": "uuid",
        "content": "Ğ Ğ°ÑÑˆĞ¸Ñ„Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğ¹ Ñ‚ĞµĞºÑÑ‚",
        "is_mine": true,
        "timestamp": "2024-01-15T10:30:00Z",
        "status": "sent|delivered|read"
      }
    ]
  }
}
```

#### `message.send` (Desktop â†’ Phone)
```json
{
  "cmd": "message.send",
  "data": {
    "chat_id": "uuid",
    "content": "Ğ¢ĞµĞºÑÑ‚ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ",
    "reply_to_id": null
  }
}
```
**Ğ’Ğ°Ğ¶Ğ½Ğ¾:** Ğ¢ĞµĞ»ĞµÑ„Ğ¾Ğ½ ÑĞ°Ğ¼ ÑˆĞ¸Ñ„Ñ€ÑƒĞµÑ‚ Ğ¸ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµÑ‚ Ñ‡ĞµÑ€ĞµĞ· WebSocket Ğ½Ğ° ÑĞµÑ€Ğ²ĞµÑ€.

#### `message.sent` (Phone â†’ Desktop)
```json
{
  "cmd": "message.sent",
  "data": {
    "chat_id": "uuid",
    "message_id": "uuid",
    "timestamp": "2024-01-15T10:30:00Z"
  }
}
```

### 3.6. Ğ¡Ğ¾Ğ±Ñ‹Ñ‚Ğ¸Ñ (Phone â†’ Desktop)

#### `event.new_message`
```json
{
  "type": "event",
  "cmd": "event.new_message",
  "data": {
    "chat_id": "uuid",
    "message": {
      "id": "uuid",
      "content": "ĞĞ¾Ğ²Ğ¾Ğµ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ",
      "is_mine": false,
      "timestamp": "...",
      "sender_nickname": "Alice"
    }
  }
}
```

#### `event.typing`
```json
{
  "type": "event",
  "cmd": "event.typing",
  "data": {
    "chat_id": "uuid",
    "is_typing": true
  }
}
```

#### `event.message_status`
```json
{
  "type": "event",
  "cmd": "event.message_status",
  "data": {
    "chat_id": "uuid",
    "message_id": "uuid",
    "status": "delivered|read"
  }
}
```

#### `event.contact_online`
```json
{
  "type": "event",
  "cmd": "event.contact_online",
  "data": {
    "pubkey": "base64...",
    "is_online": true
  }
}
```

### 3.7. Clipboard Bridge

#### `clipboard.push` (Ğ»ÑĞ±Ğ°Ñ ÑÑ‚Ğ¾Ñ€Ğ¾Ğ½Ğ°)
```json
{
  "cmd": "clipboard.push",
  "data": {
    "type": "text|image|file",
    "content": "ÑĞºĞ¾Ğ¿Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğ¹ Ñ‚ĞµĞºÑÑ‚",
    "mime": "text/plain",
    "size": 1234
  }
}
```

#### `clipboard.received` (Ğ¿Ğ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ¶Ğ´ĞµĞ½Ğ¸Ğµ)
```json
{
  "cmd": "clipboard.received",
  "data": {
    "accepted": true
  }
}
```

## 4. State Machine (UI ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ñ)

### 4.1. Desktop States

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   INITIAL   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                           â”‚ (app start)
                           â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”‚  SCANNING   â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚       â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                     â”‚
            â”‚              â”‚ (QR scanned by phone)      â”‚
            â”‚              â–¼                            â”‚
            â”‚       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
            â”‚       â”‚ CONFIRMING  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
            â”‚       â”‚ (show OTP)  â”‚  (timeout/cancel)   â”‚
            â”‚       â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                     â”‚
            â”‚              â”‚ (OTP verified)             â”‚
            â”‚              â–¼                            â”‚
            â”‚       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
            â”‚       â”‚ CONNECTING  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
            â”‚       â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  (connection fail)  â”‚
            â”‚              â”‚ (WebSocket connected)      â”‚
            â”‚              â–¼                            â”‚
            â”‚       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
            â”‚       â”‚    READY    â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
            â”‚       â”‚  (working)  â”‚            â”‚        â”‚
            â”‚       â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜            â”‚        â”‚
            â”‚              â”‚ (presence lost)   â”‚        â”‚
            â”‚              â–¼                   â”‚        â”‚
            â”‚       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚        â”‚
            â”‚       â”‚   BLOCKED   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
            â”‚       â”‚(grace period)â”‚ (presence restored)â”‚
            â”‚       â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                     â”‚
            â”‚              â”‚ (grace expired)            â”‚
            â”‚              â–¼                            â”‚
            â”‚       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”‚DISCONNECTED â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   (user clicks "Reconnect")
```

### 4.2. ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğ¹

| Ğ¡Ğ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ | UI | Ğ”ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ |
|-----------|----|-----------------------|
| **INITIAL** | Ğ­ĞºÑ€Ğ°Ğ½ Ğ¿Ñ€Ğ¸Ğ²ĞµÑ‚ÑÑ‚Ğ²Ğ¸Ñ | ĞĞ°Ğ¶Ğ°Ñ‚ÑŒ "ĞŸĞ¾Ğ´ĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒ Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½" |
| **SCANNING** | ĞĞ½Ğ¸Ğ¼Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğ¹ QR-ĞºĞ¾Ğ´ (Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ÑĞµÑ‚ÑÑ ĞºĞ°Ğ¶Ğ´Ñ‹Ğµ 30 ÑĞµĞº) | Ğ¡ĞºĞ°Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½Ğ¾Ğ¼ Ğ¸Ğ»Ğ¸ Ğ¾Ñ‚Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ |
| **CONFIRMING** | Ğ‘Ğ¾Ğ»ÑŒÑˆĞ¸Ğµ Ñ†Ğ¸Ñ„Ñ€Ñ‹ OTP + Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞºÑ†Ğ¸Ñ | Ğ’Ğ²ĞµÑÑ‚Ğ¸ OTP Ğ½Ğ° Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½Ğµ Ğ¸Ğ»Ğ¸ Ğ¾Ñ‚Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ |
| **CONNECTING** | Ğ¡Ğ¿Ğ¸Ğ½Ğ½ĞµÑ€ + "ĞŸĞ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ..." | Ğ–Ğ´Ğ°Ñ‚ÑŒ Ğ¸Ğ»Ğ¸ Ğ¾Ñ‚Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ |
| **READY** | ĞŸĞ¾Ğ»Ğ½Ñ‹Ğ¹ UI Ñ Ñ‡Ğ°Ñ‚Ğ°Ğ¼Ğ¸ | Ğ Ğ°Ğ±Ğ¾Ñ‚Ğ°Ñ‚ÑŒ, Ğ¾Ñ‚Ğ²ÑĞ·Ğ°Ñ‚ÑŒ Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½ Ğ² Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ°Ñ… |
| **BLOCKED** | Ğ—Ğ°Ñ‚ĞµĞ¼Ğ½Ñ‘Ğ½Ğ½Ñ‹Ğ¹ UI + Ñ‚Ğ°Ğ¹Ğ¼ĞµÑ€ grace period | ĞŸĞ¾Ğ´Ğ½ĞµÑÑ‚Ğ¸ Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½ Ğ±Ğ»Ğ¸Ğ¶Ğµ |
| **DISCONNECTED** | Ğ¡Ğ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ Ğ¾Ğ± Ğ¾Ñ‚ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğ¸ | ĞŸĞµÑ€ĞµĞ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒ Ğ¸Ğ»Ğ¸ Ğ¾Ñ‚Ğ²ÑĞ·Ğ°Ñ‚ÑŒ |

### 4.3. Grace Period Ğ»Ğ¾Ğ³Ğ¸ĞºĞ°

```csharp
// ĞĞ°ÑÑ‚Ñ€Ğ°Ğ¸Ğ²Ğ°ĞµĞ¼Ñ‹Ğµ Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹
public class PresenceConfig
{
    public int HeartbeatIntervalSec = 5;
    public int MissedHeartbeatsToWarn = 2;      // 10 ÑĞµĞº â†’ Ğ¿Ğ¾ĞºĞ°Ğ·Ğ°Ñ‚ÑŒ warning
    public int MissedHeartbeatsToBlock = 6;     // 30 ÑĞµĞº â†’ BLOCKED state
    public int GracePeriodSec = 60;             // Ğ’ BLOCKED Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ Ğ²Ğ¾ÑÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ
    public bool TrustWifiOnly = false;          // Ğ•ÑĞ»Ğ¸ true, Ğ½Ğµ Ğ±Ğ»Ğ¾ĞºĞ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¿Ñ€Ğ¸ Ğ¿Ğ¾Ñ‚ĞµÑ€Ğµ BLE
}
```

---

## 5. Ğ‘ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾ÑÑ‚ÑŒ

### 5.1. Ğ¨Ğ¸Ñ„Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ ĞºĞ°Ğ½Ğ°Ğ»Ğ° Desktop â†” Phone

1. **QR ÑĞ¾Ğ´ĞµÑ€Ğ¶Ğ¸Ñ‚** Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğ¹ X25519 public key Ğ´ĞµÑĞºÑ‚Ğ¾Ğ¿Ğ° + nonce
2. **ĞŸÑ€Ğ¸ ÑĞºĞ°Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğ¸** Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½ Ğ³ĞµĞ½ĞµÑ€Ğ¸Ñ€ÑƒĞµÑ‚ ÑĞ²Ğ¾Ğ¹ Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğ¹ X25519 keypair
3. **ECDH** â†’ shared secret â†’ derive AES-256-GCM key Ğ´Ğ»Ñ ÑĞµÑÑĞ¸Ğ¸
4. **Ğ’ÑĞµ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ** Ğ² WebSocket ÑˆĞ¸Ñ„Ñ€ÑƒÑÑ‚ÑÑ ÑÑ‚Ğ¸Ğ¼ ĞºĞ»ÑÑ‡Ğ¾Ğ¼
5. **Session token** â€” Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑĞ°Ğ½Ğ½Ñ‹Ğ¹ JWT Ñ expiration 24h, Ñ€Ğ¾Ñ‚Ğ°Ñ†Ğ¸Ñ ĞºĞ°Ğ¶Ğ´Ñ‹Ğ¹ Ñ‡Ğ°Ñ

### 5.2. Ğ Ğ¾Ñ‚Ğ°Ñ†Ğ¸Ñ ĞºĞ»ÑÑ‡ĞµĞ¹

```
ĞšĞ°Ğ¶Ğ´Ñ‹Ğ¹ Ñ‡Ğ°Ñ:
  Phone â†’ Desktop: { cmd: "session.rotate", data: { new_token: "..." } }
  Desktop: ÑĞ¾Ñ…Ñ€Ğ°Ğ½ÑĞµÑ‚ Ğ½Ğ¾Ğ²Ñ‹Ğ¹ Ñ‚Ğ¾ĞºĞµĞ½, ÑÑ‚Ğ°Ñ€Ñ‹Ğ¹ ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑÑ Ğ½ĞµĞ²Ğ°Ğ»Ğ¸Ğ´Ğ½Ñ‹Ğ¼
```

### 5.3. Ğ§Ñ‚Ğ¾ ĞĞ• Ñ…Ñ€Ğ°Ğ½Ğ¸Ñ‚ÑÑ Ğ½Ğ° Ğ´ĞµÑĞºÑ‚Ğ¾Ğ¿Ğµ

- âŒ ĞŸÑ€Ğ¸Ğ²Ğ°Ñ‚Ğ½Ñ‹Ğµ ĞºĞ»ÑÑ‡Ğ¸ ÑˆĞ¸Ñ„Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ
- âŒ ĞŸĞ¾Ğ»Ğ½Ñ‹Ğµ Ñ‚ĞµĞºÑÑ‚Ñ‹ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹ (Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ preview)
- âŒ ĞšĞ¾Ğ½Ñ‚Ğ°ĞºÑ‚Ğ½Ñ‹Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ (ĞºÑ€Ğ¾Ğ¼Ğµ ĞºÑÑˆĞ° Ğ½Ğ° Ğ²Ñ€ĞµĞ¼Ñ ÑĞµÑÑĞ¸Ğ¸)
- âœ… Session token (Ğ² Windows Credential Manager)
- âœ… Desktop ID (uuid)
- âœ… ĞŸĞ¾ÑĞ»ĞµĞ´Ğ½Ğ¸Ğ¹ IP Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½Ğ° (Ğ´Ğ»Ñ Ğ±Ñ‹ÑÑ‚Ñ€Ğ¾Ğ³Ğ¾ Ñ€ĞµĞºĞ¾Ğ½Ğ½ĞµĞºÑ‚Ğ°)

### 5.4. Revocation ÑÑ†ĞµĞ½Ğ°Ñ€Ğ¸Ğ¸

| Ğ¡Ğ¾Ğ±Ñ‹Ñ‚Ğ¸Ğµ | Ğ”ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğµ |
|---------|----------|
| ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ½Ğ°Ğ¶Ğ°Ğ» "ĞÑ‚Ğ²ÑĞ·Ğ°Ñ‚ÑŒ" Ğ½Ğ° Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½Ğµ | `link.revoke` â†’ Desktop Ğ¾Ñ‡Ğ¸Ñ‰Ğ°ĞµÑ‚ Ğ²ÑÑ‘ |
| ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ½Ğ°Ğ¶Ğ°Ğ» "ĞÑ‚Ğ²ÑĞ·Ğ°Ñ‚ÑŒ" Ğ½Ğ° Ğ´ĞµÑĞºÑ‚Ğ¾Ğ¿Ğµ | `link.revoke` â†’ Phone ÑƒĞ´Ğ°Ğ»ÑĞµÑ‚ ÑĞµÑÑĞ¸Ñ |
| Ğ¢ĞµĞ»ĞµÑ„Ğ¾Ğ½ Ğ¿Ğ¾Ñ‚ĞµÑ€ÑĞ½/ÑƒĞºÑ€Ğ°Ğ´ĞµĞ½ | ĞĞ¾Ğ²Ğ°Ñ Ñ€ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ Ğ½Ğ° Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½Ğµ â†’ Ğ²ÑĞµ Ğ´ĞµÑĞºÑ‚Ğ¾Ğ¿-ÑĞµÑÑĞ¸Ğ¸ Ğ¸Ğ½Ğ²Ğ°Ğ»Ğ¸Ğ´Ğ¸Ñ€ÑƒÑÑ‚ÑÑ |
| ĞŸĞ¾Ğ´Ğ¾Ğ·Ñ€Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ°Ñ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾ÑÑ‚ÑŒ | Phone Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ¸Ñ‚ÑŒ `link.revoke` Ñ `reason: security` |

---

## 6. UI/UX Ğ¡Ğ¿ĞµÑ†Ğ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ñ

### 6.1. Desktop: Ğ­ĞºÑ€Ğ°Ğ½ Ğ¿Ñ€Ğ¸Ğ²ÑĞ·ĞºĞ¸

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                              â”‚
â”‚                     ğŸ”— ĞŸĞ¾Ğ´ĞºĞ»ÑÑ‡Ğ¸Ñ‚Ğµ Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½                    â”‚
â”‚                                                              â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚         â”‚                                     â”‚              â”‚
â”‚         â”‚         â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“            â”‚              â”‚
â”‚         â”‚         â–“â–“          â–“â–“â–“            â”‚              â”‚
â”‚         â”‚         â–“â–“  QR CODE â–“â–“â–“            â”‚  â† ĞŸÑƒĞ»ÑŒÑĞ°Ñ†Ğ¸Ñ â”‚
â”‚         â”‚         â–“â–“          â–“â–“â–“            â”‚    Ğ¿Ğ¾ ĞºÑ€Ğ°ÑĞ¼  â”‚
â”‚         â”‚         â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“            â”‚              â”‚
â”‚         â”‚                                     â”‚              â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                                                              â”‚
â”‚              ĞÑ‚ĞºÑ€Ğ¾Ğ¹Ñ‚Ğµ Orpheus Ğ½Ğ° Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½Ğµ Ğ¸                  â”‚
â”‚              Ğ¾Ñ‚ÑĞºĞ°Ğ½Ğ¸Ñ€ÑƒĞ¹Ñ‚Ğµ QR-ĞºĞ¾Ğ´ Ğ² Ğ¼ĞµĞ½Ñ                      â”‚
â”‚              ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ â†’ Desktop Link                        â”‚
â”‚                                                              â”‚
â”‚                    â±ï¸ ĞšĞ¾Ğ´ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑÑ Ñ‡ĞµÑ€ĞµĞ· 27 ÑĞµĞº             â”‚
â”‚                                                              â”‚
â”‚                        [ĞÑ‚Ğ¼ĞµĞ½Ğ°]                              â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.2. Desktop: ĞŸĞ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ¶Ğ´ĞµĞ½Ğ¸Ğµ OTP

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                              â”‚
â”‚                     âœ“ Ğ¢ĞµĞ»ĞµÑ„Ğ¾Ğ½ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½!                        â”‚
â”‚                                                              â”‚
â”‚                   ĞšĞ¾Ğ´ Ğ¿Ğ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ¶Ğ´ĞµĞ½Ğ¸Ñ:                         â”‚
â”‚                                                              â”‚
â”‚                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚                 â”‚                     â”‚                      â”‚
â”‚                 â”‚       7 4 2 9       â”‚  â† ĞšÑ€ÑƒĞ¿Ğ½Ñ‹Ğ¹ ÑˆÑ€Ğ¸Ñ„Ñ‚     â”‚
â”‚                 â”‚                     â”‚    Ñ Ğ°Ğ½Ğ¸Ğ¼Ğ°Ñ†Ğ¸ĞµĞ¹       â”‚
â”‚                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚                                                              â”‚
â”‚              Ğ’Ğ²ĞµĞ´Ğ¸Ñ‚Ğµ ÑÑ‚Ğ¾Ñ‚ ĞºĞ¾Ğ´ Ğ½Ğ° Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½Ğµ                    â”‚
â”‚              Ğ´Ğ»Ñ Ğ¿Ğ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ¶Ğ´ĞµĞ½Ğ¸Ñ Ğ¿Ñ€Ğ¸Ğ²ÑĞ·ĞºĞ¸                      â”‚
â”‚                                                              â”‚
â”‚                        [ĞÑ‚Ğ¼ĞµĞ½Ğ°]                              â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.3. Desktop: Ğ˜Ğ½Ğ´Ğ¸ĞºĞ°Ñ‚Ğ¾Ñ€ ÑĞ²ÑĞ·Ğ¸ (Ğ² Ñ€Ğ°Ğ±Ğ¾Ñ‡ĞµĞ¼ Ñ€ĞµĞ¶Ğ¸Ğ¼Ğµ)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”Œâ”€â”€â”€â”                                  â”‚
â”‚  â”‚ ğŸ“±â”‚  iPhone 15 Pro                   â”‚
â”‚  â”‚ â— â”‚  ĞŸĞ¾Ğ´ĞºĞ»ÑÑ‡Ñ‘Ğ½ â€¢ Ğ‘Ğ°Ñ‚Ğ°Ñ€ĞµÑ 78%         â”‚  â† â— = Ğ·ĞµĞ»Ñ‘Ğ½Ñ‹Ğ¹ Ğ¿ÑƒĞ»ÑŒÑ
â”‚  â””â”€â”€â”€â”˜                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Ğ¡Ğ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ñ Ğ¸Ğ½Ğ´Ğ¸ĞºĞ°Ñ‚Ğ¾Ñ€Ğ°:
  â— ğŸŸ¢ ĞŸĞ¾Ğ´ĞºĞ»ÑÑ‡Ñ‘Ğ½ (Ğ¿ÑƒĞ»ÑŒÑĞ°Ñ†Ğ¸Ñ)
  â— ğŸŸ¡ Ğ¡Ğ»Ğ°Ğ±Ñ‹Ğ¹ ÑĞ¸Ğ³Ğ½Ğ°Ğ» (Ğ¼ĞµÑ€Ñ†Ğ°Ğ½Ğ¸Ğµ)  
  â— ğŸŸ  Ğ’Ğ¾ÑÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ... (grace period)
  â— ğŸ”´ ĞÑ‚ĞºĞ»ÑÑ‡Ñ‘Ğ½
```

### 6.4. Desktop: Ğ—Ğ°Ğ±Ğ»Ğ¾ĞºĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğ¹ Ñ€ĞµĞ¶Ğ¸Ğ¼

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â”‚
â”‚â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â”‚
â”‚â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘   Ğ ĞĞ—ĞœĞ«Ğ¢Ğ«Ğ™ ĞšĞĞĞ¢Ğ•ĞĞ¢ Ğ§ĞĞ¢ĞĞ’    â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â”‚
â”‚â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â”‚
â”‚â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â”‚
â”‚                                                              â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚              â”‚                             â”‚                 â”‚
â”‚              â”‚     ğŸ“± Ğ¢ĞµĞ»ĞµÑ„Ğ¾Ğ½ Ğ½Ğµ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½    â”‚                 â”‚
â”‚              â”‚                             â”‚                 â”‚
â”‚              â”‚   ĞŸĞ¾Ğ´Ğ½ĞµÑĞ¸Ñ‚Ğµ Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½ Ğ±Ğ»Ğ¸Ğ¶Ğµ   â”‚                 â”‚
â”‚              â”‚                             â”‚                 â”‚
â”‚              â”‚      â±ï¸ Ğ‘Ğ»Ğ¾ĞºĞ¸Ñ€Ğ¾Ğ²ĞºĞ° Ñ‡ĞµÑ€ĞµĞ·    â”‚                 â”‚
â”‚              â”‚           0:47              â”‚                 â”‚
â”‚              â”‚                             â”‚                 â”‚
â”‚              â”‚   [ĞÑ‚Ğ²ÑĞ·Ğ°Ñ‚ÑŒ]  [ĞŸĞ¾Ğ²Ñ‚Ğ¾Ñ€Ğ¸Ñ‚ÑŒ]   â”‚                 â”‚
â”‚              â”‚                             â”‚                 â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.5. Mobile: Ğ­ĞºÑ€Ğ°Ğ½ Desktop Link

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â†  Desktop Link                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                        â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚  ğŸ–¥ï¸ â†  â•â•â•â•  â†’ ğŸ“±             â”‚   â”‚   â† Lottie Ğ°Ğ½Ğ¸Ğ¼Ğ°Ñ†Ğ¸Ñ
â”‚   â”‚      Ğ¡Ğ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ...          â”‚   â”‚     ÑĞ²ÑĞ·Ğ¸ ÑƒÑÑ‚Ñ€Ğ¾Ğ¹ÑÑ‚Ğ²
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                        â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚   ĞŸĞ¾Ğ´ĞºĞ»ÑÑ‡Ñ‘Ğ½Ğ½Ñ‹Ğµ ÑƒÑÑ‚Ñ€Ğ¾Ğ¹ÑÑ‚Ğ²Ğ°              â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚                                        â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚ ğŸ–¥ï¸  Windows PC - Chrome        â”‚   â”‚
â”‚   â”‚     ĞŸĞ¾Ğ´ĞºĞ»ÑÑ‡Ñ‘Ğ½ â€¢ 192.168.1.100  â”‚   â”‚
â”‚   â”‚     ĞŸĞ¾ÑĞ»ĞµĞ´Ğ½ÑÑ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾ÑÑ‚ÑŒ: ÑĞµĞ¹Ñ‡Ğ°Ñâ”‚   â”‚
â”‚   â”‚                      [ĞÑ‚Ğ²ÑĞ·Ğ°Ñ‚ÑŒ]â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                        â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚   ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸                            â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚                                        â”‚
â”‚   Ğ Ğ°Ğ·Ñ€ĞµÑˆĞ¸Ñ‚ÑŒ Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ñ      [  â—â”€â”€]   â”‚
â”‚                                        â”‚
â”‚   Clipboard Bridge           [â”€â”€â—  ]   â”‚
â”‚                                        â”‚
â”‚   Ğ£Ğ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ñ Ğ½Ğ° ĞŸĞš          [  â—â”€â”€]   â”‚
â”‚                                        â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚     [Ğ¡ĞºĞ°Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ QR-ĞºĞ¾Ğ´]       â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 7. ĞŸĞ»Ğ°Ğ½ Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸ Ğ¿Ğ¾ ÑÑ‚Ğ°Ğ¿Ğ°Ğ¼

### Ğ­Ñ‚Ğ°Ğ¿ 0: ĞŸĞ¾Ğ´Ğ³Ğ¾Ñ‚Ğ¾Ğ²ĞºĞ° (1-2 Ğ´Ğ½Ñ)

**Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ¸:**
- [ ] Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ²ĞµÑ‚ĞºÑƒ `feature/desktop-link` Ğ² Ğ¾Ğ±Ğ¾Ğ¸Ñ… Ñ€ĞµĞ¿Ğ¾Ğ·Ğ¸Ñ‚Ğ¾Ñ€Ğ¸ÑÑ…
- [ ] Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚Ğ¸:
  - Desktop: `System.Net.WebSockets`, `QRCoder`, `Newtonsoft.Json`
  - Mobile: `shelf`, `shelf_web_socket`, `qr_code_scanner`
- [ ] Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ±Ğ°Ğ·Ğ¾Ğ²Ñ‹Ğµ Ğ¼Ğ¾Ğ´ĞµĞ»Ğ¸ Ğ¿Ñ€Ğ¾Ñ‚Ğ¾ĞºĞ¾Ğ»Ğ° (shared DTO)

**Ğ¤Ğ°Ğ¹Ğ»Ñ‹ Desktop:**
```
orpheus_desktop/
â”œâ”€â”€ Services/
â”‚   â””â”€â”€ DesktopLink/
â”‚       â”œâ”€â”€ IPhoneLinkService.cs      # Ğ˜Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹Ñ
â”‚       â”œâ”€â”€ PhoneLinkService.cs       # Ğ ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ
â”‚       â”œâ”€â”€ PresenceMonitor.cs        # ĞœĞ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³ ÑĞ²ÑĞ·Ğ¸
â”‚       â””â”€â”€ Protocol/
â”‚           â”œâ”€â”€ DlpMessage.cs         # Ğ‘Ğ°Ğ·Ğ¾Ğ²Ñ‹Ğ¹ ĞºĞ»Ğ°ÑÑ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ
â”‚           â”œâ”€â”€ DlpCommands.cs        # Enum ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´
â”‚           â””â”€â”€ DlpModels.cs          # DTO Ğ´Ğ»Ñ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
â”œâ”€â”€ ViewModels/
â”‚   â””â”€â”€ LinkViewModel.cs              # VM Ğ´Ğ»Ñ ÑĞºÑ€Ğ°Ğ½Ğ° Ğ¿Ñ€Ğ¸Ğ²ÑĞ·ĞºĞ¸
â””â”€â”€ Views/
    â”œâ”€â”€ LinkPage.xaml                 # Ğ­ĞºÑ€Ğ°Ğ½ Ğ¿Ñ€Ğ¸Ğ²ÑĞ·ĞºĞ¸
    â””â”€â”€ LinkPage.xaml.cs
```

**Ğ¤Ğ°Ğ¹Ğ»Ñ‹ Mobile:**
```
lib/
â”œâ”€â”€ services/
â”‚   â””â”€â”€ desktop_link/
â”‚       â”œâ”€â”€ desktop_link_service.dart     # Ğ“Ğ»Ğ°Ğ²Ğ½Ñ‹Ğ¹ ÑĞµÑ€Ğ²Ğ¸Ñ
â”‚       â”œâ”€â”€ desktop_link_server.dart      # WebSocket ÑĞµÑ€Ğ²ĞµÑ€
â”‚       â”œâ”€â”€ desktop_link_protocol.dart    # ĞŸÑ€Ğ¾Ñ‚Ğ¾ĞºĞ¾Ğ» DLP
â”‚       â””â”€â”€ desktop_link_session.dart     # Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ ÑĞµÑÑĞ¸ÑĞ¼Ğ¸
â”œâ”€â”€ screens/
â”‚   â””â”€â”€ desktop_link_screen.dart          # UI ÑĞºÑ€Ğ°Ğ½
â””â”€â”€ models/
    â””â”€â”€ desktop_session_model.dart        # ĞœĞ¾Ğ´ĞµĞ»ÑŒ ÑĞµÑÑĞ¸Ğ¸
```

---

### Ğ­Ñ‚Ğ°Ğ¿ 1: QR Pairing Ğ±ĞµĞ· BLE (3-4 Ğ´Ğ½Ñ)

**Desktop Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸:**
- [ ] `PhoneLinkService.GenerateQrPayload()` â€” Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ´Ğ»Ñ QR
- [ ] `LinkPage.xaml` â€” UI Ñ QR-ĞºĞ¾Ğ´Ğ¾Ğ¼ (Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ ĞºĞ°Ğ¶Ğ´Ñ‹Ğµ 30 ÑĞµĞº)
- [ ] `PhoneLinkService.StartListening()` â€” ÑĞ»ÑƒÑˆĞ°Ñ‚ÑŒ HTTP Ğ½Ğ° Ğ¿Ğ¾Ñ€Ñ‚Ñƒ Ğ´Ğ»Ñ Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ° Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½Ğ°
- [ ] `LinkViewModel` â€” state machine (SCANNING â†’ CONFIRMING â†’ CONNECTING)
- [ ] UI Ğ´Ğ»Ñ Ğ¾Ñ‚Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ñ OTP Ğ¸ Ğ¾Ğ¶Ğ¸Ğ´Ğ°Ğ½Ğ¸Ñ Ğ¿Ğ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ¶Ğ´ĞµĞ½Ğ¸Ñ

**Mobile Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸:**
- [ ] `DesktopLinkScreen` â€” UI Ñ ĞºĞ½Ğ¾Ğ¿ĞºĞ¾Ğ¹ "Ğ¡ĞºĞ°Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ QR"
- [ ] `DesktopLinkService.scanAndPair()` â€” ÑĞºĞ°Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ + Ğ¿Ğ°Ñ€ÑĞ¸Ğ½Ğ³ QR
- [ ] `DesktopLinkService.generateOtp()` â€” Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ 4-Ğ·Ğ½Ğ°Ñ‡Ğ½Ğ¾Ğ³Ğ¾ ĞºĞ¾Ğ´Ğ°
- [ ] `DesktopLinkService.confirmPairing()` â€” Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ° Ğ¿Ğ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ¶Ğ´ĞµĞ½Ğ¸Ñ Ğ½Ğ° desktop
- [ ] Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ ÑĞµÑÑĞ¸Ğ¸ Ğ² secure storage

**ĞšÑ€Ğ¸Ñ‚ĞµÑ€Ğ¸Ğ¸ Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ğ½Ğ¾ÑÑ‚Ğ¸:**
- âœ… Desktop Ğ¿Ğ¾ĞºĞ°Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚ QR
- âœ… Mobile ÑĞºĞ°Ğ½Ğ¸Ñ€ÑƒĞµÑ‚ Ğ¸ Ğ¿Ğ¾ĞºĞ°Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚ OTP
- âœ… ĞŸĞ¾ÑĞ»Ğµ Ğ²Ğ²Ğ¾Ğ´Ğ° OTP Ğ¾Ğ±Ğ° ÑƒÑÑ‚Ñ€Ğ¾Ğ¹ÑÑ‚Ğ²Ğ° Ğ·Ğ½Ğ°ÑÑ‚ Ğ´Ñ€ÑƒĞ³ Ğ¾ Ğ´Ñ€ÑƒĞ³Ğµ
- âœ… Ğ¡ĞµÑÑĞ¸Ñ ÑĞ¾Ñ…Ñ€Ğ°Ğ½ÑĞµÑ‚ÑÑ Ğ¿Ñ€Ğ¸ Ğ¿ĞµÑ€ĞµĞ·Ğ°Ğ¿ÑƒÑĞºĞµ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğ¹

---

### Ğ­Ñ‚Ğ°Ğ¿ 2: WebSocket ÑĞµÑ€Ğ²ĞµÑ€ Ğ½Ğ° Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½Ğµ (3-4 Ğ´Ğ½Ñ)

**Mobile Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸:**
- [ ] `DesktopLinkServer` â€” WebSocket ÑĞµÑ€Ğ²ĞµÑ€ Ğ½Ğ° Ğ¿Ğ¾Ñ€Ñ‚Ñƒ 8765
- [ ] Ğ¨Ğ¸Ñ„Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ ĞºĞ°Ğ½Ğ°Ğ»Ğ° (session key Ğ¸Ğ· ÑÑ‚Ğ°Ğ¿Ğ° 1)
- [ ] Ğ Ğ¾ÑƒÑ‚Ğ¸Ğ½Ğ³ ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´: `contacts.sync`, `chats.list`, `chat.messages`
- [ ] ĞŸÑƒĞ±Ğ»Ğ¸ĞºĞ°Ñ†Ğ¸Ñ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ğ¹: `event.new_message`, `event.typing`
- [ ] Ğ˜Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ Ñ ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒÑÑ‰Ğ¸Ğ¼Ğ¸ ÑĞµÑ€Ğ²Ğ¸ÑĞ°Ğ¼Ğ¸ (DatabaseService, ChatSessionController)

**Desktop Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸:**
- [ ] `PhoneLinkService.Connect()` â€” Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ Ğº WebSocket ÑĞµÑ€Ğ²ĞµÑ€Ñƒ Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½Ğ°
- [ ] `DataProxy` â€” ĞºĞ»Ğ°ÑÑ Ğ´Ğ»Ñ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ¸ ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´ Ğ¸ Ğ¿Ğ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ñ Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ¾Ğ²
- [ ] ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ğ¹ Ğ¸ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ UI

**ĞšÑ€Ğ¸Ñ‚ĞµÑ€Ğ¸Ğ¸ Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ğ½Ğ¾ÑÑ‚Ğ¸:**
- âœ… Desktop Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡Ğ°ĞµÑ‚ÑÑ Ğº Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½Ñƒ Ğ¿Ğ¾ WebSocket
- âœ… Desktop Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ°ĞµÑ‚ ÑĞ¿Ğ¸ÑĞ¾Ğº ĞºĞ¾Ğ½Ñ‚Ğ°ĞºÑ‚Ğ¾Ğ²
- âœ… Desktop Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ°ĞµÑ‚ ÑĞ¿Ğ¸ÑĞ¾Ğº Ñ‡Ğ°Ñ‚Ğ¾Ğ² Ñ Ğ¿Ñ€ĞµĞ²ÑŒÑ
- âœ… Desktop Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ°ĞµÑ‚ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ ĞºĞ¾Ğ½ĞºÑ€ĞµÑ‚Ğ½Ğ¾Ğ³Ğ¾ Ñ‡Ğ°Ñ‚Ğ°

---

### Ğ­Ñ‚Ğ°Ğ¿ 3: ĞŸĞ¾Ğ»Ğ½Ğ¾Ñ†ĞµĞ½Ğ½Ñ‹Ğ¹ UI Ğ½Ğ° Desktop (4-5 Ğ´Ğ½ĞµĞ¹)

**Desktop Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸:**
- [ ] `ContactsViewModel` â€” Ğ¿Ğ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ ĞºĞ¾Ğ½Ñ‚Ğ°ĞºÑ‚Ğ¾Ğ² Ñ‡ĞµÑ€ĞµĞ· `DataProxy`
- [ ] `ChatsViewModel` â€” Ğ¿Ğ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ Ñ‡Ğ°Ñ‚Ğ¾Ğ² Ñ‡ĞµÑ€ĞµĞ· `DataProxy`
- [ ] `ChatViewModel` â€” Ğ¿Ğ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ/Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ° ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹
- [ ] Ğ£Ğ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ Ğ²ÑĞµ Ğ·Ğ°Ğ³Ğ»ÑƒÑˆĞºĞ¸ Ğ¸ Ğ»Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ñ‹Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ
- [ ] Real-time Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ñ Ñ‡ĞµÑ€ĞµĞ· ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ñ Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½Ğ°
- [ ] Ğ˜Ğ½Ğ´Ğ¸ĞºĞ°Ñ‚Ğ¾Ñ€ ÑÑ‚Ğ°Ñ‚ÑƒÑĞ° ÑĞ²ÑĞ·Ğ¸ Ğ² header

**ĞšÑ€Ğ¸Ñ‚ĞµÑ€Ğ¸Ğ¸ Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ğ½Ğ¾ÑÑ‚Ğ¸:**
- âœ… UI Ğ¿Ğ¾Ğ»Ğ½Ğ¾ÑÑ‚ÑŒÑ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚ Ñ‡ĞµÑ€ĞµĞ· Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½
- âœ… ĞĞ¾Ğ²Ñ‹Ğµ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ Ğ¿Ğ¾ÑĞ²Ğ»ÑÑÑ‚ÑÑ Ğ² Ñ€ĞµĞ°Ğ»ÑŒĞ½Ğ¾Ğ¼ Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ¸
- âœ… ĞœĞ¾Ğ¶Ğ½Ğ¾ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑÑ‚ÑŒ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ (Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½ ÑˆĞ¸Ñ„Ñ€ÑƒĞµÑ‚ Ğ¸ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµÑ‚)
- âœ… Typing Ğ¸Ğ½Ğ´Ğ¸ĞºĞ°Ñ‚Ğ¾Ñ€ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚

---

### Ğ­Ñ‚Ğ°Ğ¿ 4: Presence Ğ¸ Ğ±Ğ»Ğ¾ĞºĞ¸Ñ€Ğ¾Ğ²ĞºĞ° (2-3 Ğ´Ğ½Ñ)

**Desktop Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸:**
- [ ] `PresenceMonitor` â€” heartbeat ĞºĞ°Ğ¶Ğ´Ñ‹Ğµ 5 ÑĞµĞº
- [ ] Grace period Ğ»Ğ¾Ğ³Ğ¸ĞºĞ° (Ğ½Ğ°ÑÑ‚Ñ€Ğ°Ğ¸Ğ²Ğ°ĞµĞ¼Ğ°Ñ)
- [ ] UI ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ BLOCKED Ñ Ñ€Ğ°Ğ·Ğ¼Ñ‹Ñ‚Ğ¸ĞµĞ¼ ĞºĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚Ğ°
- [ ] ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¾Ğµ Ğ²Ğ¾ÑÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ¿Ñ€Ğ¸ reconnect

**Mobile Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸:**
- [ ] ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° `presence.heartbeat`
- [ ] ĞÑ‚ÑĞ»ĞµĞ¶Ğ¸Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾ÑÑ‚Ğ¸ Ğ´ĞµÑĞºÑ‚Ğ¾Ğ¿Ğ°
- [ ] ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ disconnect Ğ¿Ñ€Ğ¸ Ñ‚Ğ°Ğ¹Ğ¼Ğ°ÑƒÑ‚Ğµ

**ĞšÑ€Ğ¸Ñ‚ĞµÑ€Ğ¸Ğ¸ Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ğ½Ğ¾ÑÑ‚Ğ¸:**
- âœ… ĞŸÑ€Ğ¸ Ğ¿Ğ¾Ñ‚ĞµÑ€Ğµ ÑĞ²ÑĞ·Ğ¸ UI Ğ±Ğ»Ğ¾ĞºĞ¸Ñ€ÑƒĞµÑ‚ÑÑ Ğ¿Ğ¾ÑĞ»Ğµ grace period
- âœ… ĞŸÑ€Ğ¸ Ğ²Ğ¾ÑÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğ¸ ÑĞ²ÑĞ·Ğ¸ UI Ñ€Ğ°Ğ·Ğ±Ğ»Ğ¾ĞºĞ¸Ñ€ÑƒĞµÑ‚ÑÑ
- âœ… ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ grace period Ğ² UI

---

### Ğ­Ñ‚Ğ°Ğ¿ 5: Clipboard Bridge (1-2 Ğ´Ğ½Ñ)

**Desktop Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸:**
- [ ] `ClipboardBridge` â€” Ğ¼Ğ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³ Ğ±ÑƒÑ„ĞµÑ€Ğ° Ğ¾Ğ±Ğ¼ĞµĞ½Ğ°
- [ ] ĞÑ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ° `clipboard.push` Ğ¿Ñ€Ğ¸ ĞºĞ¾Ğ¿Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğ¸
- [ ] Toast-ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ğµ Ğ¿Ñ€Ğ¸ Ğ¿Ğ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğ¸ clipboard Ñ Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½Ğ°
- [ ] ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ° Ğ²ĞºĞ»/Ğ²Ñ‹ĞºĞ» Ğ² settings

**Mobile Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸:**
- [ ] ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° `clipboard.push` Ğ¾Ñ‚ Ğ´ĞµÑĞºÑ‚Ğ¾Ğ¿Ğ°
- [ ] ĞÑ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ° clipboard Ğ½Ğ° Ğ´ĞµÑĞºÑ‚Ğ¾Ğ¿
- [ ] Toggle Ğ² DesktopLinkScreen

**ĞšÑ€Ğ¸Ñ‚ĞµÑ€Ğ¸Ğ¸ Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ğ½Ğ¾ÑÑ‚Ğ¸:**
- âœ… ĞšĞ¾Ğ¿Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ½Ğ° ĞŸĞš â†’ Ğ¿Ğ¾ÑĞ²Ğ»ÑĞµÑ‚ÑÑ Ğ½Ğ° Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½Ğµ
- âœ… ĞšĞ¾Ğ¿Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ½Ğ° Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½Ğµ â†’ Ğ¿Ğ¾ÑĞ²Ğ»ÑĞµÑ‚ÑÑ Ğ½Ğ° ĞŸĞš
- âœ… ĞœĞ¾Ğ¶Ğ½Ğ¾ Ğ¾Ñ‚ĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒ Ğ² Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ°Ñ…

---

### Ğ­Ñ‚Ğ°Ğ¿ 6: BLE Presence (Ğ¾Ğ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾, 3-4 Ğ´Ğ½Ñ)

**Ğ’Ğ°Ğ¶Ğ½Ğ¾:** Ğ­Ñ‚Ğ¾Ñ‚ ÑÑ‚Ğ°Ğ¿ â€” Ğ£Ğ›Ğ£Ğ§Ğ¨Ğ•ĞĞ˜Ğ•, Ğ½Ğµ Ğ±Ğ»Ğ¾ĞºĞµÑ€. Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ° Ğ´Ğ¾Ğ»Ğ¶Ğ½Ğ° Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°Ñ‚ÑŒ Ğ±ĞµĞ· Ğ½ĞµĞ³Ğ¾.

**Desktop Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸:**
- [ ] `BleScanner` â€” Ğ¿Ğ¾Ğ¸ÑĞº Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½Ğ° Ğ¿Ğ¾ BLE
- [ ] Ğ˜Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ Ñ `PresenceMonitor` â€” BLE RSSI ĞºĞ°Ğº Ğ´Ğ¾Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğ¹ ÑĞ¸Ğ³Ğ½Ğ°Ğ»
- [ ] Fallback Ğ½Ğ° Wi-Fi-only ĞµÑĞ»Ğ¸ BLE Ğ½ĞµĞ´Ğ¾ÑÑ‚ÑƒĞ¿ĞµĞ½

**Mobile Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸:**
- [ ] BLE advertising ĞºĞ¾Ğ³Ğ´Ğ° Desktop Link Ğ°ĞºÑ‚Ğ¸Ğ²ĞµĞ½
- [ ] Ğ£Ğ½Ğ¸ĞºĞ°Ğ»ÑŒĞ½Ñ‹Ğ¹ BLE UUID Ğ´Ğ»Ñ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ¹ ÑĞµÑÑĞ¸Ğ¸

**ĞšÑ€Ğ¸Ñ‚ĞµÑ€Ğ¸Ğ¸ Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ğ½Ğ¾ÑÑ‚Ğ¸:**
- âœ… Ğ•ÑĞ»Ğ¸ BLE Ğ´Ğ¾ÑÑ‚ÑƒĞ¿ĞµĞ½ â€” Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ÑÑ Ğ´Ğ»Ñ proximity
- âœ… Ğ•ÑĞ»Ğ¸ BLE Ğ½ĞµĞ´Ğ¾ÑÑ‚ÑƒĞ¿ĞµĞ½ â€” Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ñ‡ĞµÑ€ĞµĞ· Wi-Fi
- âœ… ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ²Ğ¸Ğ´Ğ¸Ñ‚ ÑÑ‚Ğ°Ñ‚ÑƒÑ BLE Ğ² Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ°Ñ…

---

## 8. Ğ¢ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ

### 8.1. Unit Ñ‚ĞµÑÑ‚Ñ‹

**Desktop:**
```csharp
// Tests/Services/PhoneLinkServiceTests.cs
[TestClass]
public class PhoneLinkServiceTests
{
    [TestMethod]
    public void GenerateQrPayload_ShouldContainRequiredFields() { }
    
    [TestMethod]
    public void ParseLinkConfirm_ShouldExtractSessionToken() { }
    
    [TestMethod]
    public void StateMachine_ShouldTransitionCorrectly() { }
}

// Tests/Services/PresenceMonitorTests.cs
[TestClass]
public class PresenceMonitorTests
{
    [TestMethod]
    public void MissedHeartbeats_ShouldTriggerWarning() { }
    
    [TestMethod]
    public void GracePeriodExpired_ShouldBlockUI() { }
}
```

**Mobile:**
```dart
// test/services/desktop_link_service_test.dart
void main() {
  group('DesktopLinkService', () {
    test('parseQrPayload should extract all fields', () {});
    test('generateOtp should return 4 digits', () {});
    test('session should persist across restarts', () {});
  });
  
  group('DesktopLinkServer', () {
    test('should handle contacts.sync command', () {});
    test('should encrypt responses', () {});
    test('should publish events to connected desktop', () {});
  });
}
```

### 8.2. Integration Ñ‚ĞµÑÑ‚Ñ‹

```dart
// test/integration/desktop_link_integration_test.dart
void main() {
  group('Desktop Link E2E', () {
    test('full pairing flow', () async {
      // 1. Desktop generates QR
      // 2. Mobile parses QR
      // 3. Mobile sends confirm
      // 4. Desktop receives confirm
      // 5. Both show OTP
      // 6. Mobile confirms OTP
      // 7. Desktop connects to mobile server
      // 8. Desktop requests contacts
      // 9. Mobile responds with contacts
    });
  });
}
```

### 8.3. Ğ ÑƒÑ‡Ğ½Ğ¾Ğµ Ñ‚ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ

| Ğ¡Ñ†ĞµĞ½Ğ°Ñ€Ğ¸Ğ¹ | ĞĞ¶Ğ¸Ğ´Ğ°ĞµĞ¼Ñ‹Ğ¹ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚ |
|----------|---------------------|
| ĞŸĞµÑ€Ğ²Ğ°Ñ Ğ¿Ñ€Ğ¸Ğ²ÑĞ·ĞºĞ° | QR â†’ OTP â†’ ĞŸĞ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¾ |
| ĞŸĞµÑ€ĞµĞ·Ğ°Ğ¿ÑƒÑĞº desktop | ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¾Ğµ Ğ¿ĞµÑ€ĞµĞ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ |
| ĞŸĞµÑ€ĞµĞ·Ğ°Ğ¿ÑƒÑĞº mobile | Desktop Ğ¿Ğ¾ĞºĞ°Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚ "ĞŸĞµÑ€ĞµĞ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ..." |
| Ğ¢ĞµĞ»ĞµÑ„Ğ¾Ğ½ Ğ² Ğ´Ñ€ÑƒĞ³Ğ¾Ğ¹ ÑĞµÑ‚Ğ¸ | "Ğ¢ĞµĞ»ĞµÑ„Ğ¾Ğ½ Ğ½ĞµĞ´Ğ¾ÑÑ‚ÑƒĞ¿ĞµĞ½" + Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞºÑ†Ğ¸Ñ |
| Wi-Fi Ğ¾Ñ‚ĞºĞ»ÑÑ‡Ñ‘Ğ½ Ğ½Ğ° Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½Ğµ | ĞŸÑ€ĞµĞ´ÑƒĞ¿Ñ€ĞµĞ¶Ğ´ĞµĞ½Ğ¸Ğµ + Ğ¿Ñ€Ğ¾Ğ´Ğ¾Ğ»Ğ¶Ğ°ĞµÑ‚ Ñ‡ĞµÑ€ĞµĞ· mobile data |
| ĞÑ‚Ğ²ÑĞ·Ğ°Ñ‚ÑŒ Ñ Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½Ğ° | Desktop ÑĞ±Ñ€Ğ°ÑÑ‹Ğ²Ğ°ĞµÑ‚ÑÑ Ğ² INITIAL |
| ĞÑ‚Ğ²ÑĞ·Ğ°Ñ‚ÑŒ Ñ desktop | Ğ¢ĞµĞ»ĞµÑ„Ğ¾Ğ½ ÑƒĞ´Ğ°Ğ»ÑĞµÑ‚ ÑĞµÑÑĞ¸Ñ |

---

## 9. Ğ˜Ğ·Ğ²ĞµÑÑ‚Ğ½Ñ‹Ğµ Ğ¾Ğ³Ñ€Ğ°Ğ½Ğ¸Ñ‡ĞµĞ½Ğ¸Ñ

1. **ĞĞ´Ğ¸Ğ½ Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½ â€” Ğ¾Ğ´Ğ¸Ğ½ Ğ´ĞµÑĞºÑ‚Ğ¾Ğ¿**: Ğ¼ÑƒĞ»ÑŒÑ‚Ğ¸Ğ°ĞºĞºĞ°ÑƒĞ½Ñ‚ Ğ½Ğµ Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶Ğ¸Ğ²Ğ°ĞµÑ‚ÑÑ
2. **Ğ›Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ğ°Ñ ÑĞµÑ‚ÑŒ**: ÑƒÑÑ‚Ñ€Ğ¾Ğ¹ÑÑ‚Ğ²Ğ° Ğ´Ğ¾Ğ»Ğ¶Ğ½Ñ‹ Ğ±Ñ‹Ñ‚ÑŒ Ğ² Ğ¾Ğ´Ğ½Ğ¾Ğ¹ ÑĞµÑ‚Ğ¸ (Ğ¸Ğ»Ğ¸ VPN)
3. **Ğ‘Ğ°Ñ‚Ğ°Ñ€ĞµÑ Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½Ğ°**: WebSocket ÑĞµÑ€Ğ²ĞµÑ€ Ğ¿Ğ¾Ñ‚Ñ€ĞµĞ±Ğ»ÑĞµÑ‚ ~5-10% Ğ·Ğ° Ğ´ĞµĞ½ÑŒ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾Ğ³Ğ¾ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ
4. **Windows only**: macOS/Linux Ğ²ĞµÑ€ÑĞ¸Ğ¸ â€” Ğ¾Ñ‚Ğ´ĞµĞ»ÑŒĞ½Ğ°Ñ Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ°
5. **ĞĞµÑ‚ offline Ğ½Ğ° desktop**: Ğ±ĞµĞ· Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½Ğ° â€” Ğ½ĞµÑ‚ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ°

---

## 10. ĞœĞµÑ‚Ñ€Ğ¸ĞºĞ¸ ÑƒÑĞ¿ĞµÑ…Ğ°

| ĞœĞµÑ‚Ñ€Ğ¸ĞºĞ° | Ğ¦ĞµĞ»ÑŒ |
|---------|------|
| Ğ’Ñ€ĞµĞ¼Ñ Ğ¿ĞµÑ€Ğ²Ğ¾Ğ¹ Ğ¿Ñ€Ğ¸Ğ²ÑĞ·ĞºĞ¸ | < 30 ÑĞµĞºÑƒĞ½Ğ´ |
| Ğ’Ñ€ĞµĞ¼Ñ Ğ¿ĞµÑ€ĞµĞ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ñ | < 3 ÑĞµĞºÑƒĞ½Ğ´Ñ‹ |
| Ğ—Ğ°Ğ´ĞµÑ€Ğ¶ĞºĞ° ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹ | < 100ms |
| ĞŸĞ¾Ñ‚Ñ€ĞµĞ±Ğ»ĞµĞ½Ğ¸Ğµ Ğ±Ğ°Ñ‚Ğ°Ñ€ĞµĞ¸ Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½Ğ° | < 10% Ğ·Ğ° 8 Ñ‡Ğ°ÑĞ¾Ğ² |
| Crash rate | < 0.1% |

---

## 11. Ğ Ğ¸ÑĞºĞ¸ Ğ¸ Ğ¼Ğ¸Ñ‚Ğ¸Ğ³Ğ°Ñ†Ğ¸Ğ¸

| Ğ Ğ¸ÑĞº | Ğ’ĞµÑ€Ğ¾ÑÑ‚Ğ½Ğ¾ÑÑ‚ÑŒ | ĞœĞ¸Ñ‚Ğ¸Ğ³Ğ°Ñ†Ğ¸Ñ |
|------|-------------|-----------|
| BLE Ğ½ĞµÑÑ‚Ğ°Ğ±Ğ¸Ğ»ĞµĞ½ Ğ½Ğ° Windows | Ğ’Ñ‹ÑĞ¾ĞºĞ°Ñ | BLE Ğ¾Ğ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ĞµĞ½, Wi-Fi â€” primary |
| ĞšĞ¾Ñ€Ğ¿Ğ¾Ñ€Ğ°Ñ‚Ğ¸Ğ²Ğ½Ñ‹Ğµ ÑĞµÑ‚Ğ¸ Ğ±Ğ»Ğ¾ĞºĞ¸Ñ€ÑƒÑÑ‚ mDNS | Ğ¡Ñ€ĞµĞ´Ğ½ÑÑ | Direct IP Ğ²Ğ²Ğ¾Ğ´, relay Ñ‡ĞµÑ€ĞµĞ· ÑĞµÑ€Ğ²ĞµÑ€ |
| Ğ¢ĞµĞ»ĞµÑ„Ğ¾Ğ½ Ğ·Ğ°ÑÑ‹Ğ¿Ğ°ĞµÑ‚ | Ğ¡Ñ€ĞµĞ´Ğ½ÑÑ | Foreground service, wake locks |
| ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ·Ğ°Ğ±Ñ‹Ğ²Ğ°ĞµÑ‚ Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½ | ĞĞ¸Ğ·ĞºĞ°Ñ | Configurable grace period |
| Man-in-the-middle Ğ°Ñ‚Ğ°ĞºĞ° | ĞĞ¸Ğ·ĞºĞ°Ñ | E2E ÑˆĞ¸Ñ„Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ ÑĞµÑÑĞ¸Ğ¸, OTP Ğ²ĞµÑ€Ğ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ñ |

---

## 12. Ğ“Ğ»Ğ¾ÑÑĞ°Ñ€Ğ¸Ğ¹

| Ğ¢ĞµÑ€Ğ¼Ğ¸Ğ½ | ĞĞ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ¸Ğµ |
|--------|-------------|
| **DLP** | Desktop Link Protocol â€” Ğ¿Ñ€Ğ¾Ñ‚Ğ¾ĞºĞ¾Ğ» Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ |
| **Session Token** | JWT Ñ‚Ğ¾ĞºĞµĞ½ Ğ´Ğ»Ñ Ğ°Ğ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸ ÑĞµÑÑĞ¸Ğ¸ |
| **OTP** | One-Time Password â€” 4 Ñ†Ğ¸Ñ„Ñ€Ñ‹ Ğ´Ğ»Ñ Ğ²ĞµÑ€Ğ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ğ¸ |
| **Grace Period** | Ğ’Ñ€ĞµĞ¼Ñ Ğ´Ğ¾ Ğ±Ğ»Ğ¾ĞºĞ¸Ñ€Ğ¾Ğ²ĞºĞ¸ Ğ¿Ñ€Ğ¸ Ğ¿Ğ¾Ñ‚ĞµÑ€Ğµ ÑĞ²ÑĞ·Ğ¸ |
| **DataProxy** | ĞšĞ»Ğ°ÑÑ Ğ½Ğ° desktop Ğ´Ğ»Ñ Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ Ñ Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½Ğ¾Ğ¼ |
| **Heartbeat** | ĞŸĞµÑ€Ğ¸Ğ¾Ğ´Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ ÑĞ¸Ğ³Ğ½Ğ°Ğ» "Ñ Ğ¶Ğ¸Ğ²" |

---

## Ğ§ĞµĞºĞ»Ğ¸ÑÑ‚ Ğ´Ğ»Ñ Ğ°Ğ³ĞµĞ½Ñ‚Ğ°

ĞŸÑ€Ğ¸ Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ³Ğ¾ ÑÑ‚Ğ°Ğ¿Ğ° Ğ°Ğ³ĞµĞ½Ñ‚ Ğ´Ğ¾Ğ»Ğ¶ĞµĞ½:

- [ ] ĞŸÑ€Ğ¾Ñ‡Ğ¸Ñ‚Ğ°Ñ‚ÑŒ Ğ¾Ğ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ ÑÑ‚Ğ°Ğ¿Ğ° Ğ² Ñ€Ğ°Ğ·Ğ´ĞµĞ»Ğµ 7
- [ ] Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ/Ğ¼Ğ¾Ğ´Ğ¸Ñ„Ğ¸Ñ†Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ñ„Ğ°Ğ¹Ğ»Ñ‹ ÑĞ¾Ğ³Ğ»Ğ°ÑĞ½Ğ¾ ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğµ
- [ ] Ğ¡Ğ»ĞµĞ´Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¿Ñ€Ğ¾Ñ‚Ğ¾ĞºĞ¾Ğ»Ñƒ Ğ¸Ğ· Ñ€Ğ°Ğ·Ğ´ĞµĞ»Ğ° 3
- [ ] Ğ¡Ğ¾Ğ±Ğ»ÑĞ´Ğ°Ñ‚ÑŒ state machine Ğ¸Ğ· Ñ€Ğ°Ğ·Ğ´ĞµĞ»Ğ° 4
- [ ] ĞĞ°Ğ¿Ğ¸ÑĞ°Ñ‚ÑŒ unit Ñ‚ĞµÑÑ‚Ñ‹ ÑĞ¾Ğ³Ğ»Ğ°ÑĞ½Ğ¾ Ñ€Ğ°Ğ·Ğ´ĞµĞ»Ñƒ 8.1
- [ ] ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ ĞºÑ€Ğ¸Ñ‚ĞµÑ€Ğ¸Ğ¸ Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ğ½Ğ¾ÑÑ‚Ğ¸ ÑÑ‚Ğ°Ğ¿Ğ°
- [ ] ĞĞµ Ğ¸Ğ·Ğ¼ĞµĞ½ÑÑ‚ÑŒ ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒÑÑ‰Ğ¸Ğµ ÑĞµÑ€Ğ²Ğ¸ÑÑ‹ Ğ±ĞµĞ· ĞºÑ€Ğ°Ğ¹Ğ½ĞµĞ¹ Ğ½ĞµĞ¾Ğ±Ñ…Ğ¾Ğ´Ğ¸Ğ¼Ğ¾ÑÑ‚Ğ¸
- [ ] ĞŸÑ€Ğ¸ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğ¸ ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒÑÑ‰ĞµĞ³Ğ¾ ĞºĞ¾Ğ´Ğ° â€” Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ¾Ğ±Ñ€Ğ°Ñ‚Ğ½ÑƒÑ ÑĞ¾Ğ²Ğ¼ĞµÑÑ‚Ğ¸Ğ¼Ğ¾ÑÑ‚ÑŒ

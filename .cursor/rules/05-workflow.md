---
alwaysApply: true
---

# Cursor rules (orpheus_client) — рабочий алгоритм “как часы”

## 0) Входные данные (что ты ждёшь от пользователя)
- Какая часть: **client / server / admin** (если не указано — уточни).
- Сценарий и ожидаемое поведение: “было → стало”.
- Ограничения: “без коммита”, “только анализ”, “не трогать UI”, “сохранить совместимость” и т.д.

## 1) Перед изменениями
- Быстро сформулируй план: что меняем, где, как проверим.
- Найди точки входа: экран/сервис/модель/роутинг, который отвечает за задачу.

## 2) Реализация
- Делай минимально достаточные изменения, без лишних рефакторингов.
- Для критичных частей добавляй/обновляй тесты (`test/`) и/или контрактные тесты.
- Не ломай архитектуру: UI не должен тянуть сервисы “внутрь” себя без прослойки.

## 3) Проверка
- Если менялись `lib/`, `test/`, `pubspec.*`, `analysis_options.yaml`:
  - `flutter test`
  - при необходимости `flutter analyze`

## 4) Артефакты процесса (обязательно)
- Обнови:
  - `CHANGELOG.md` → секция `[Unreleased]`
  - `AI_WORKLOG.md` → новая запись (что/когда/файлы/команды)
  - `docs/*` → если меняется поведение/инструкции/контракты
- Если изменение пользовательское (“Что нового”) — единый публичный источник: **OPHEUS_ADMIN → Версии**.

## 5) Коммит
- Если пользователь не запретил — делай коммит:
  - предпочтительно через `.\scripts\auto-commit.ps1`
  - либо вручную (Conventional Commits)









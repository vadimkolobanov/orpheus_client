# Отчёт: что сделано с версии 0.9.0 (с 06.12.2025)

Дата составления: 12.12.2025  
Область: **клиент (Flutter) + документация репозитория**.  

## Источники, на основе которых собран отчёт
- **Встроенная “История обновлений” в приложении**: `lib/config.dart` → `AppConfig.changelogData` (legacy).  
  Новый единый источник публичных release notes: `OPHEUS_ADMIN` → "Версии" (`app_versions`).
- **Репозиторный changelog разработки**: `CHANGELOG.md` (секция `[Unreleased]`).
- **Журнал работ**: `AI_WORKLOG.md`.
- **Техническая документация**: `docs/*` и ADR в `docs/DECISIONS/*`.

## Важное замечание про даты
В исходниках клиента **нет отдельных записей “06–08.12.2025”**. Встроенный changelog содержит ближайшую запись **09.12.2025 (v1.0.0)**.
Поэтому “с 06.12” отчёт фактически покрывает:
- изменения, попавшие в релизную запись **09.12.2025 (v1.0.0)**,
- и изменения, добавленные в репозиторий **12.12.2025** (по `CHANGELOG.md`/`AI_WORKLOG.md`/`docs`).

---

## 1) Пользовательские изменения (продукт)

### 1.1 Релиз v1.0.0 (09.12.2025) — по встроенной “Истории обновлений”
Источник: `lib/config.dart` → запись `version: 1.0.0`, `date: 09.12.2025`.

- **Звонки в спящем режиме**: входящие проходят, даже если телефон заблокирован или приложение выгружено.
- **Экран “Системный монитор”**: стабильность сети, пинг, статус шифрования в реальном времени.
- **Новая навигация**: Контакты / Система / Профиль.
- **ICE Buffering**: исправление проблем соединения при ответе на звонок из Push‑уведомления.
- **UI/брендинг**: обновлённый профиль и QR‑визитка, иконка, заставка, многострочный ввод сообщений, анимация шифрования.
- **Фиксы**: устранены ошибки дублирования звонков, улучшена стабильность WebSocket.

### 1.2 Изменения 12.12.2025 (по репозиторному `CHANGELOG.md`)
Источник: `CHANGELOG.md` → `[Unreleased]`.

- **Безопасность входа (опционально)**:
  - PIN‑код (6 цифр), экран блокировки, прогрессивная блокировка при неверных попытках.
  - **Duress code**: второй PIN, который показывает “пустой профиль”.
  - **Код удаления (wipe code)**: ввод кода → подтверждение удержанием → полный wipe (защита от случайного запуска).
  - Опциональный **auto‑wipe** после N неверных попыток PIN.
  - Жест panic wipe (3 ухода приложения в фон) — **выключен по умолчанию**.
- **Экран “Как пользоваться”**: встроенная инструкция по ключевым сценариям и функциям безопасности.

---

## 2) Технические/инженерные изменения (клиент)
Источник: `CHANGELOG.md`, `AI_WORKLOG.md`, `docs/DECISIONS/0003-security-system.md`.

### 2.1 Система безопасности
- Добавлены сервисы/экраны для PIN/duress/wipe и настройки безопасности.
- Реализован режим duress (“пустота”): данные **скрываются**, не удаляются.
- Важно: входящие сообщения **продолжают сохраняться**, даже если включён duress‑режим (чтобы не терять данные).

### 2.2 Гарантии для звонков (чтобы безопасность не мешала)
- При активном звонке автолок приложения **не должен мешать** ответу/разговору.
- Реализован глобальный флаг активного звонка через `CallStateService`, чтобы блокировка при уходе в фон не срабатывала во время звонка.

---

## 3) Процесс/документация разработки
Источник: `docs/*`, `CHANGELOG.md`, `AI_WORKLOG.md`.

- Зафиксирован процесс обновления артефактов (changelog/worklog/docs) и формат коммитов.
- Добавлены ADR‑документы для ключевых решений (в т.ч. безопасность).

---

## 4) Рекомендации (что логично сделать дальше)
- Добавить отдельный “сценарий ответа на звонок из уведомления” (кнопки “Принять/Отклонить” в notification и обработка клика) — если нужен UX “как у телефонии”.
- Если требуется “wipe по кнопке питания гарантированно”: нужен нативный Android‑механизм (Kotlin), т.к. Flutter напрямую питание не перехватывает.



# Инвестиционный план Orpheus — 12 месяцев (без привязки к календарным годам)

> **Цель**: дать инвестору профессиональный 12‑месячный план: **что уже реализовано**, **что именно делаем дальше**, **какие критерии готовности**, **бюджет**, **экономика** и **риски**.  
> **Ограничение**: план **не придумывает** фичи “с потолка” — только то, что соответствует философии Orpheus и/или уже отражено в существующих планах релиза.

---

## 0) Факты из репозитория (что уже реализовано)

- **Продукт**: анонимный мессенджер с **E2E‑шифрованием** и принципом **«нулевого знания»** на сервере.
- **Три ключевых компонента**:
  - **Клиент**: Flutter (`orpheus_client`)
  - **Сервер связи**: FastAPI/WebSocket (`Programs/orpheus`)
  - **Админ‑панель**: FastAPI + web UI (`Programs/OPHEUS_ADMIN`) — уже умеет версии/промо/лицензии/платежные сущности.

### 0.1 Уже реализовано (подтверждено кодом)
- **Support Chat (“чат с разработчиком”) — реализован end‑to‑end**
  - Клиент: `lib/screens/support_chat_screen.dart`, `lib/services/support_chat_service.dart`
  - Тесты клиента: `test/services/support_chat_service_test.dart`, `test/widgets/support_chat_screen_test.dart`
  - Сервер: `Programs/orpheus/main.py` — `/api/support/messages`, `/api/support/message`, `/api/support/logs`, `/api/support/unread`, а также обработка `support-msg` по WebSocket
  - Админка: `OPHEUS_ADMIN/app/routers/support.py` + UI `app/templates/support.html`
- **Лицензии/доступ**
  - На сервере есть таблица `licenses` и проверка лицензии (факт наличия записи = активна).
  - Клиент получает события `license-status` / `payment-confirmed` (обработчики есть).
- **Промокоды**
  - На сервере есть `promo_codes` + `POST /api/activate-promo`, есть админские эндпоинты создания промокодов и тесты.
- **Платежный контур**
  - В коде присутствует платежная логика (`payments.py`) и WS‑инвойсы, но **по умолчанию выключено** через `PAYMENTS_ENABLED=0`.

### 0.2 НЕ реализовано (важно, чтобы не строить план на выдумках)
- **Feedback‑форма/воронка отзывов как отдельный модуль**: в коде **не найдено** ни `feedback_screen.dart`, ни `feedback.py` в админке.  
  Это **только план** в `RELEASE_PLAN.md`/`TASKS_FOR_BOARD.md`, но не готовая фича.

### 0.3 Что явно зафиксировано в планах релиза (можно включать в план, но честно помечать как “будет сделано”)
- **1.1.1**: стабильность/DoS‑валидации/реконнект/очереди/индексы.
- **1.2.0**: среди прочего — **ограничение лицензии по времени** (expires_at) и **организация воронки обратной связи** (как будущие задачи).

---

## 1) Базовая стратегия на 12 месяцев (в рамках философии Orpheus)

- **Фокус №1**: надёжность доставки и UX “как у нормального мессенджера”, без потери privacy.
- **Фокус №2**: безопасность эксплуатации (DoS/абьюз/лимиты/протокол‑версия), потому что trust‑продукт.
- **Фокус №3**: монетизация в текущем виде: **$5 за лицензию** + промокоды/донаты (что уже присутствует как концепт/контур).

> Важно: план **не закладывает** агрессивную “аналитику пользователей”, A/B‑эксперименты и трекинг — это плохо совместимо с философией “нулевого знания”.

---

## 2) 12‑месячная дорожная карта = 100% (доли по направлениям)

Эта таблица — как “пирог” работ на 12 месяцев. Сумма = **100%**.

- **20% — Стабилизация и качество (1.1.1 → 1.1.x)**
  - P0/P1 баги, устойчивый реконнект, очереди отправки, индексы, timeouts, базовая DoS‑защита.
- **18% — Безопасность как продукт**
  - rate limiting, протокол‑версионирование, hardening, аудит крипто‑ошибок/обработки, безопасность WS.
- **16% — Монетизация ($5 лицензия)**
  - доведение оплаты/выдачи лицензии до стабильного контура, промокоды, админ‑операции, UX покупки, снижение ошибок оплаты.
- **14% — Поддержка и улучшение качества через Support Chat (уже есть)**
  - скорость ответа, triage, улучшения UI админки/чата, автоматизация сбора диагностик.
- **12% — UX и “надёжность в реальности”**
  - статусы отправки/доставки, обработка обрывов, понятные ошибки, дата/время в чате (как запланировано в 1.2.0).
- **12% — Эксплуатация и масштабирование**
  - приватная сеть для БД/Redis, наблюдаемость, алерты, бэкапы/DR, cost control.
- **8% — Платформы / дистрибуция**
  - доведение desktop‑клиента до “публичной” готовности и/или подготовка iOS (если стратегически нужно).

---

## 3) Коммерческая модель на 12 месяцев (как есть сейчас)

### 3.1 Цена и форма продажи (текущая вводная)
- **Цена лицензии**: **$5 за лицензию** (one‑time, пока без подписки — если не задано иначе).
- **Платежи в коде**: есть переключатель `PAYMENTS_ENABLED` (по умолчанию `0`), а базовая цена берётся из `PAYMENT_BASE_PRICE` (дефолт сейчас 10.0 в коде; под $5 — это настройка окружения/конфига).
- **Промокоды**: поддерживаются и уже протестированы — это готовый канал “доступ без оплаты”/активаций.

### 3.2 Почему $5‑модель одновременно привлекательна и рискованна
- В privacy‑нише **медленнее растёт органика**, но **выше готовность платить** при доверии и качестве.
- **Но** one‑time $5 означает, что окупаемость зависит от **объёма продаж**, а не от продлений. Это честный риск для инвестора (см. раздел “Экономика”).

---

## 4) План работ на 12 месяцев (помесячно, с критериями готовности)

> Формат: **что делаем** → **как проверяем** → **выходные артефакты**.

### Месяц 1 — Стабилизация 1.1.1 + базовые защиты
- **Работы**
  - Закрыть P0/P1 из плана 1.1.1 (UI баги, WS reconnection backoff, очереди отправки, индексы, DoS‑лимиты).
  - Единое логирование (DebugLogger), убрать “print”.
- **Проверки**
  - Unit/widget тесты на критичные сценарии отправки/реконнекта.
  - Нагрузочный smoke для WS (хотя бы синтетический).
- **Результат**
  - Релиз 1.1.1, снижение “обрывов”, меньше потерянных сообщений.

### Месяц 2 — 1.2.0 (коммерчески важное) + наблюдаемость
- **Работы**
  - Привести “лицензионный контур” в порядок под текущую модель $5: понятные состояния, надёжная выдача лицензии, обработка ошибок оплаты/активации.
  - Минимальная наблюдаемость **без трекинга пользователя**: ошибки сервера, частота реконнектов, нагрузка, health endpoints.
- **Проверки**
  - Интеграционные тесты: активация лицензии, промокод, корректные события `license-status`.
- **Результат**
  - Релиз 1.1.x/1.2.x (в зависимости от состава), который **не ломает** оплату и статус лицензии.

### Месяц 3 — Доведение Support Chat (фича уже есть) до “продуктового” уровня
- **Работы**
  - Улучшение UX чата: “не теряем сообщения”, понятные статусы, сценарии “нет сети”.
  - Админ‑процессы: фильтры/поиск, непрочитанные, быстрые ответы, просмотр логов.
- **Проверки**
  - E2E: отправка сообщения → ответ админа → отметка прочитано; отправка логов → просмотр в админке.
- **Результат**
  - Снижение стоимости поддержки и ускорение исправления багов → рост доверия.

### Месяц 4 — Платежный контур (MVP) и операционные процессы
- **Работы**
  - Включение платежей в controlled mode (фича‑флаг).
  - Billing events: “инвойс создан”, “оплата подтверждена”, “лицензия активирована”, “refund/отмена”.
  - Процессы: возвраты, саппорт‑скрипты, журнал аудита.
- **Проверки**
  - Тестовый стенд оплаты + чек‑листы регрессии.
- **Результат**
  - Первый стабильный “денежный цикл”.

### Месяц 5 — UX/Retention: доставка, статусы, офлайн‑надёжность
- **Работы**
  - Индикатор отправки/доставки, улучшение офлайн‑очередей.
  - Дата/время в диалоге (понятность и “живость”).
- **Проверки**
  - Тесты на “сообщение отправлено при reconnect”, “не теряется при обрыве”.
- **Результат**
  - Снижение churn из‑за “ненадёжности”.

### Месяц 6 — Security hardening + rate limiting + протокол‑версия
- **Работы**
  - Rate limiting (WS + HTTP), ограничение размеров, таймауты, защита от абьюза.
  - Версионирование протокола, graceful‑reconnect при рестартах.
- **Проверки**
  - Нагрузочные/абьюз‑тесты (пусть базовые, но регулярные).
  - Мини‑аудит (внутренний) + план внешнего.
- **Результат**
  - Риск крупных инцидентов снижен, что критично для доверия.

### Месяцы 7–8 — Рост без нарушения философии privacy: онбординг + промо + коммуникации
- **Работы**
  - Улучшение онбординга (QR, объяснение ценности, безопасность).
  - UX покупки/активации лицензии за $5, промокоды, страницы “почему платно”.
  - Публичные метрики **без идентификации**: кол-во активированных лицензий, кол-во обращений в поддержку, uptime.
- **Проверки**
  - Регрессия оплаты/активации + контроль ошибок.
- **Результат**
  - Рост конверсии в оплату за счёт понятности и качества, без “шпионажа”.

### Месяцы 9–10 — B2B‑упаковка (опционально, но сильно улучшает окупаемость при $5 one‑time)
- **Работы**
  - “Private/Team”: выделенный контур, политика логов, SLA, админ‑настройки.
  - Коммерческие материалы: security brief, threat model (кратко), политика данных.
- **Проверки**
  - Пилот с 1–2 организациями (даже маленькими) + список требований.
- **Результат**
  - Один контракт может “перевернуть” окупаемость быстрее подписки B2C.

### Месяцы 11–12 — Cost control + масштабирование + внешний аудит
- **Работы**
  - Оптимизация себестоимости (инфра/логирование/БД), бэкапы/DR.
  - Внешний security audit (объём зависит от бюджета).
  - Подготовка к следующему году: публичный roadmap, цели по удержанию.
- **Проверки**
  - Регулярные нагрузочные тесты, пост‑мортемы инцидентов, контроль SLO.
- **Результат**
  - “Инвест‑готовая” операционка и качество.

---

## 5) Бюджет на 12 месяцев (сколько нужно и на что)

Ниже **базовый** бюджет, без “космоса”, с уклоном в качество/безопасность.

### 5.1 Сумма инвестиций (base)
- **18 млн ₽ на 12 месяцев**

### 5.2 Распределение
- **Команда и разработка — 11.0 млн ₽ (61%)**
  - 2 инженера (Flutter + backend/fullstack), частично QA/PM.
- **Инфраструктура и эксплуатация — 3.0 млн ₽ (17%)**
  - прод, мониторинг, бэкапы, приватная сеть БД, домены/серты, стораджи логов.
- **Безопасность — 2.5 млн ₽ (14%)**
  - внешняя проверка + доработки.
- **Маркетинг/дистрибуция — 1.5 млн ₽ (8%)**
  - сайт, контент, комьюнити, минимум платного трафика.

> **Альтернатива (lean)**: 12–14 млн ₽ — если урезать внешний аудит и B2B‑упаковку, но вырастет риск репутационного удара при баге/инциденте.

---

## 6) KPI на 12 месяцев (доказательство прогресса без нарушения privacy)

### 6.1 Продуктовые KPI
- **D30 retention**: цель 15–25% (коридор зависит от ниши/каналов).
- **Crash‑free sessions**: 99.5%+
- **Доля доставленных сообщений без повторной отправки**: 99%+
- **Среднее время ответа поддержки** (при включённом support‑чате): < 24ч

### 6.2 Коммерческие KPI (B2C, $5 one‑time)
- **Конверсия в покупку лицензии** от активных: 1–5% (коридор, зависит от каналов/доверия).
- **Стоимость поддержки на 1000 активных**: цель — снижать за счёт support‑чата и быстрого исправления багов.
- **Доля активаций через промокоды**: мониторим как “маркетинговый/донатный” канал.

### 6.3 B2B KPI (если включаем)
- 1–3 пилота, 1 контракт к 10–12 месяцу (в базе — как “stretch goal”).

---

## 7) Экономика и окупаемость (честно для $5 one‑time)

### 7.1 Базовая формула окупаемости
Пусть:
- Цена лицензии = **$5**
- Курс для расчёта = \(R\) ₽ за $1 (берите фактический на момент питча)
- Выручка на одну лицензию в ₽ ≈ \(5 \times R\)

Тогда для возврата инвестиций \(I\) (в ₽) нужно продать:
\[
N \approx \frac{I}{5R}
\]

**Пример** (для понимания масштаба, не как обещание):  
если \(I = 18{\,}000{\,}000\) ₽ и \(R = 90\) ₽/$, то одна лицензия ≈ 450 ₽, и нужно порядка:
\[
N \approx \frac{18{\,}000{\,}000}{450} \approx 40{\,}000\ \text{лицензий}
\]

> Вывод: при one‑time $5 **B2C‑окупаемость за 12 месяцев требует очень большого объёма продаж**. Поэтому в плане отдельно выделен B2B‑рычаг и/или вариант лицензии по сроку (он уже фигурирует в roadmap, но пока не реализован).

### 7.2 Реалистичный горизонт payback (при $5 one‑time)
- **Conservative**: 24–48 месяцев (без B2B и без повторных продаж)
- **Base**: 18–30 месяцев (если качество/доверие дают устойчивую конверсию)
- **Optimistic**: 12–18 месяцев (при 1–3 B2B‑сделках + стабильном B2C‑потоке)

---

## 8) Доход инвестора (2 модели — без сказок)

### Модель A (equity): доля в компании
- Инвестор: **18 млн ₽ за 20%**
- На горизонте 12 месяцев обычно **прибыль не фиксируется**, рост идёт через **оценку** (valuation uplift).
- Механика выхода: следующий раунд/выкуп/дивиденды позже.

### Модель B (revenue‑share): инвестор возвращает деньги процентом от выручки
Хороша, если инвестор хочет “деньги обратно” без ожидания экзита.
- Инвестор: 18 млн ₽
- Возврат: **12% от валовой выручки** до **1.6×** (28.8 млн ₽)
- Тогда:
  - при 1 млн ₽/мес выручки → ~120 тыс ₽/мес инвестору → возврат долго
  - при 3 млн ₽/мес → ~360 тыс ₽/мес → существенно быстрее

> Выбор модели зависит от стратегии: “строим большую оценку” (A) или “хочу кэш‑флоу” (B).

---

## 9) Риски (главные) и как ими управляем в рамках 12 месяцев

- **Риск 1 — безопасность/инцидент** (самый опасный для trust‑продукта)
  - Митигируем: лимиты, rate limiting, протокол‑версия, аудит, наблюдаемость, быстрые patch‑релизы.
- **Риск 2 — слабый retention** (люди попробовали и ушли)
  - Митигируем: UX‑надёжность доставки, поддержка в продукте, быстрый feedback loop, работа с онбордингом.
- **Риск 3 — монетизация не взлетела**
  - Митигируем: промо, понятный UX покупки, B2B‑упаковка как “план Б”, и (если потребуется) переход к лицензии **по сроку** — это уже есть в roadmap как будущая задача.
- **Риск 4 — дистрибуция/ограничения площадок**
  - Митигируем: минимизация трекинга, прозрачные политики, альтернативная дистрибуция для Android (если понадобится).

---

## 10) Что нужно уточнить, чтобы финализировать план “под инвестора”

1) Лицензия за $5 — это **one‑time** (навсегда) или **на период** (например, год)?  
2) Хотим ли включать B2B‑упаковку в “обязательный” план (сильно влияет на окупаемость)?  
3) Инвестор хочет **equity** или **revenue‑share**?


